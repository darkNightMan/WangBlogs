{"version":3,"sources":["webpack:///src/pages/tabpage/user/index.vue","webpack:///./src/pages/tabpage/user/index.vue?cfb7","webpack:///./src/pages/tabpage/user/index.vue"],"names":["user","data","crap","previews","loading","option","fixed","img","info","outputSize","outputType","canMoveBox","autoCrop","canScale","centerBox","fixedBox","fixedNumber","fileName","downImg","imgFile","uploadImgRelaPath","roleList","dialogVisible","corpperImag","roleValidateForm","nick_name","password","email","phone","avatar","role_id","computed","extends_default","Object","vuex_esm","created","this","getroleList","userInfo","methods","updateuUser","_this2","asyncToGenerator_default","regenerator_default","a","mark","_callee","_ref","code","msg","wrap","_context","prev","next","Req","put","api","updateUser","sent","$message","message","type","dialogVisiblerole","resetForm","stop","submitForm","formName","_this3","$refs","validate","valid","console","log","_this4","_callee2","_ref2","_context2","get","getAllRole","realTime","self","getCropData","uploadImg","e","num","_this","file","target","files","name","test","value","alert","reader","FileReader","onload","typeof_default","result","window","URL","createObjectURL","Blob","example2","readAsArrayBuffer","submitUpload","_this5","_callee3","fd","baseToblob","_ref3","_context3","FormData","base64URLtoFile","append","Date","parse","upload","uploadImage","headers","Content-Type","path","base64UrlToBlob","base64Data","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","filename","File","tabpage_user","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","slot","_v","ref","staticStyle","width","model","label-width","label","prop","on","click","$event","size","icon","src","rules","required","multiple","placeholder","callback","$$v","$set","expression","_l","item","key","role_name","autocomplete","margin-left","title","visible","update:visible","gutter","span","full","canMove","original","autoCropWidth","autoCropHeight","style","_e","position","clip","id","accept","domProps","change","for","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"0OA4FAA,GACAC,KADA,WAEA,OACAC,MAAA,EACAC,YACAC,SAAA,EACAC,QACAC,OAAA,EACAC,IAAA,GACAC,MAAA,EACAC,WAAA,EAEAC,WAAA,MAGAC,YAAA,EACAC,UAAA,EAGAC,UAAA,EACAC,WAAA,EACAC,UAAA,EACAC,aAAA,MAEAC,SAAA,GACAC,QAAA,IACAC,QAAA,GACAC,kBAAA,GAEAC,YACAC,eAAA,EACAC,YAAA,GACAC,kBACAC,UAAA,GACAC,SAAA,GACAC,MAAA,GACAC,MAAA,GACAC,OAAA,GACAC,cAIAC,SAAYC,OACZC,OAAAC,EAAA,EAAAD,CAAA,sBAEAE,QA7CA,WA8CAC,KAAAC,cACAD,KAAAZ,iBAAAY,KAAAE,UAEAC,SACAC,YADA,WACA,IAAAC,EAAAL,KAAA,OAAAM,IAAAC,EAAAC,EAAAC,KAAA,SAAAC,IAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAN,EAAAC,EAAAM,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACAZ,EAAArC,SAAA,EADA+C,EAAAE,KAAA,EAEAZ,EAAAa,IAAAC,IAAAC,EAAA,EAAAC,WAAAhB,EAAAjB,kBAFA,OAAAuB,EAAAI,EAAAO,KAEAV,EAFAD,EAEAC,KAAAC,EAFAF,EAEAE,IACA,MAAAD,GACAP,EAAAkB,UACAC,QAAAX,EACAY,KAAA,YAEApB,EAAAqB,mBAAA,IAEArB,EAAAqB,mBAAA,EACArB,EAAAsB,UAAA,qBAEAtB,EAAArC,SAAA,EAbA,wBAAA+C,EAAAa,SAAAlB,EAAAL,KAAAC,IAgBAuB,WAjBA,SAiBAC,GAAA,IAAAC,EAAA/B,KACAA,KAAAgC,MAAAF,GAAAG,SAAA,SAAAC,GACA,IAAAA,EAIA,OADAC,QAAAC,IAAA,mBACA,EAHAL,EAAA3B,iBAOAH,YA3BA,WA2BA,IAAAoC,EAAArC,KAAA,OAAAM,IAAAC,EAAAC,EAAAC,KAAA,SAAA6B,IAAA,IAAAC,EAAA1E,EAAA,OAAA0C,EAAAC,EAAAM,KAAA,SAAA0B,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAvB,MAAA,cAAAuB,EAAAvB,KAAA,EACAoB,EAAAnB,IAAAuB,IAAArB,EAAA,EAAAsB,YADA,OAAAH,EAAAC,EAAAlB,KACAzD,EADA0E,EACA1E,KACA,MAFA0E,EACA3B,OAEAyB,EAAApD,SAAApB,EAAAoB,UAHA,wBAAAuD,EAAAZ,SAAAU,EAAAD,KAAA/B,IAOAqC,SAlCA,SAkCA9E,GACAmC,KAAAjC,SAAAF,EACA,IAAA+E,EAAA5C,KACAA,KAAAgC,MAAA,QAAAa,YAAA,SAAAhF,GACA+E,EAAAzD,YAAAtB,KAIAiF,UA1CA,SA0CAC,EAAAC,GACA,IAAAC,EAAAjD,KAEAkD,EAAAH,EAAAI,OAAAC,MAAA,GAEA,GADAH,EAAApE,SAAAqE,EAAAG,MACA,wCAAAC,KAAAP,EAAAI,OAAAI,OAEA,OADAC,MAAA,qCACA,EAEA,IAAAC,EAAA,IAAAC,WACAD,EAAAE,OAAA,SAAAZ,GACA,IAAAlF,OAAA,EAGAA,EAFA,WAAA+F,IAAAb,EAAAI,OAAAU,QAEAC,OAAAC,IAAAC,gBAAA,IAAAC,MAAAlB,EAAAI,OAAAU,UAEAd,EAAAI,OAAAU,OAEA,IAAAb,EACAC,EAAAhF,OAAAE,IAAAN,EACA,IAAAmF,IACAC,EAAAiB,SAAA/F,IAAAN,IAMA4F,EAAAU,kBAAAjB,IAEAkB,aAvEA,WAuEA,IAAAC,EAAArE,KAAA,OAAAM,IAAAC,EAAAC,EAAAC,KAAA,SAAA6D,IAAA,IAAAC,EAAAC,EAAAC,EAAA5G,EAAA,OAAA0C,EAAAC,EAAAM,KAAA,SAAA4D,GAAA,cAAAA,EAAA1D,KAAA0D,EAAAzD,MAAA,cACAsD,EAAA,IAAAI,SACAH,EAAAH,EAAAO,gBAAAP,EAAAlF,aACAoF,EAAAM,OAAA,SAAAL,EAAA,QAAAM,KAAAC,MAAA,IAAAD,MAAA,SACAT,EAAArG,SAAA,EAJA0G,EAAAzD,KAAA,EAKAoD,EAAAnD,IAAA8D,OAAA5D,EAAA,EAAA6D,YAAAV,GAAAW,SAAAC,eAAA,yBALA,OAAAV,EAAAC,EAAApD,KAKAzD,EALA4G,EAKA5G,KACA,MANA4G,EAKA7D,OAEAyD,EAAAjF,iBAAAK,OAAA5B,EAAAuH,MAEAf,EAAAnF,eAAA,EACAmF,EAAArG,SAAA,EAVA,yBAAA0G,EAAA9C,SAAA0C,EAAAD,KAAA/D,IAaA+E,gBApFA,SAoFAC,GAMA,IALA,IAAAC,EAAAD,EAAAE,MAAA,KACAC,EAAAF,EAAA,GAAAG,MAAA,cACAC,EAAAC,KAAAL,EAAA,IACAM,EAAAF,EAAAG,OACAC,EAAA,IAAAC,WAAAH,GACAA,KACAE,EAAAF,GAAAF,EAAAM,WAAAJ,GAEA,WAAA5B,MAAA8B,IAAAtE,KAAAgE,KAGAb,gBAhGA,SAgGAU,EAAAY,GAMA,IALA,IAAAX,EAAAD,EAAAE,MAAA,KACAC,EAAAF,EAAA,GAAAG,MAAA,cACAC,EAAAC,KAAAL,EAAA,IACAM,EAAAF,EAAAG,OACAC,EAAA,IAAAC,WAAAH,GACAA,KACAE,EAAAF,GAAAF,EAAAM,WAAAJ,GAEA,WAAAM,MAAAJ,GAAAG,GAAAzE,KAAAgE,OChPeW,GADEC,OALjB,WAA0B,IAAAC,EAAAtG,KAAauG,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,WAA+BE,YAAA,aAAuBF,EAAA,OAAYE,YAAA,WAAAC,OAA8BC,KAAA,UAAgBA,KAAA,WAAeJ,EAAA,QAAAH,EAAAQ,GAAA,YAAAR,EAAAQ,GAAA,KAAAL,EAAA,WAA0DM,IAAA,mBAAAJ,YAAA,gBAAAK,aAAgEC,MAAA,OAAcL,OAAQM,MAAAZ,EAAAlH,iBAAA+H,cAAA,WAAoDV,EAAA,gBAAqBG,OAAOQ,MAAA,KAAAC,KAAA,YAA8BZ,EAAA,OAAYa,IAAIC,MAAA,SAAAC,GAAyBlB,EAAApH,eAAA,EAAAoH,EAAArI,OAAAE,IAAAmI,EAAAlH,iBAAAK,WAAwEgH,EAAA,aAAkBG,OAAOa,KAAA,GAAAC,KAAA,qBAAAC,IAAArB,EAAAlH,iBAAAK,WAAyE,KAAA6G,EAAAQ,GAAA,KAAAL,EAAA,gBAAuCG,OAAOQ,MAAA,KAAAC,KAAA,UAAAO,QAAyCC,UAAA,EAAArG,QAAA,eAAuCiF,EAAA,aAAkBO,aAAaC,MAAA,QAAeL,OAAQkB,SAAA,GAAAC,YAAA,SAAoCb,OAAQ3D,MAAA+C,EAAAlH,iBAAA,QAAA4I,SAAA,SAAAC,GAA8D3B,EAAA4B,KAAA5B,EAAAlH,iBAAA,UAAA6I,IAA+CE,WAAA,6BAAwC7B,EAAA8B,GAAA9B,EAAA,kBAAA+B,GAAsC,OAAA5B,EAAA,aAAuB6B,IAAAD,EAAA3I,QAAAkH,OAAwBQ,MAAAiB,EAAAE,UAAAhF,MAAA8E,EAAA3I,aAA+C,OAAA4G,EAAAQ,GAAA,KAAAL,EAAA,gBAAwCG,OAAOQ,MAAA,MAAAC,KAAA,YAAAO,QACpsCC,UAAA,EAAArG,QAAA,eAAuCiF,EAAA,YAAiBG,OAAOnF,KAAA,QAAA+G,aAAA,OAAoCtB,OAAQ3D,MAAA+C,EAAAlH,iBAAA,UAAA4I,SAAA,SAAAC,GAAgE3B,EAAA4B,KAAA5B,EAAAlH,iBAAA,YAAA6I,IAAiDE,WAAA,iCAA0C,GAAA7B,EAAAQ,GAAA,KAAAL,EAAA,gBAAqCG,OAAOQ,MAAA,KAAAC,KAAA,QAAAO,QAClTC,UAAA,EAAArG,QAAA,eAAuCiF,EAAA,YAAiBG,OAAOnF,KAAA,QAAA+G,aAAA,OAAoCtB,OAAQ3D,MAAA+C,EAAAlH,iBAAA,MAAA4I,SAAA,SAAAC,GAA4D3B,EAAA4B,KAAA5B,EAAAlH,iBAAA,QAAA6I,IAA6CE,WAAA,6BAAsC,GAAA7B,EAAAQ,GAAA,KAAAL,EAAA,gBAAqCG,OAAOQ,MAAA,KAAAC,KAAA,WAAAO,QACtSC,UAAA,EAAArG,QAAA,eAAuCiF,EAAA,YAAiBG,OAAOnF,KAAA,QAAA+G,aAAA,OAAoCtB,OAAQ3D,MAAA+C,EAAAlH,iBAAA,SAAA4I,SAAA,SAAAC,GAA+D3B,EAAA4B,KAAA5B,EAAAlH,iBAAA,WAAA6I,IAAgDE,WAAA,gCAAyC,GAAA7B,EAAAQ,GAAA,KAAAL,EAAA,gBAAqCG,OAAOQ,MAAA,QAAAC,KAAA,WAAgCZ,EAAA,YAAiBG,OAAOnF,KAAA,QAAA+G,aAAA,OAAoCtB,OAAQ3D,MAAA+C,EAAAlH,iBAAA,MAAA4I,SAAA,SAAAC,GAA4D3B,EAAA4B,KAAA5B,EAAAlH,iBAAA,QAAA6I,IAA6CE,WAAA,6BAAsC,OAAA7B,EAAAQ,GAAA,KAAAL,EAAA,aAAsCO,aAAayB,cAAA,SAAsB7B,OAAQnF,KAAA,UAAAgG,KAAA,QAAAzJ,QAAAsI,EAAAtI,SAAsDsJ,IAAKC,MAAA,SAAAC,GAAyB,OAAAlB,EAAAzE,WAAA,wBAA4CyE,EAAAQ,GAAA,YAAAR,EAAAQ,GAAA,KAAAL,EAAA,aAAiDG,OAAO8B,MAAA,OAAAC,QAAArC,EAAApH,cAAA+H,MAAA,OAAyDK,IAAKsB,iBAAA,SAAApB,GAAkClB,EAAApH,cAAAsI,MAA2Bf,EAAA,UAAeG,OAAOiC,OAAA,MAAapC,EAAA,UAAeG,OAAOkC,KAAA,MAAWrC,EAAA,OAAYE,YAAA,YAAsBF,EAAA,cAAmBM,IAAA,UAAAH,OAAqBzI,IAAAmI,EAAArI,OAAAE,IAAAE,WAAAiI,EAAArI,OAAAwJ,KAAAnJ,WAAAgI,EAAArI,OAAAK,WAAAF,KAAAkI,EAAArI,OAAAG,KAAA2K,KAAAzC,EAAArI,OAAA8K,KAAAtK,SAAA6H,EAAArI,OAAAQ,SAAAuK,QAAA1C,EAAArI,OAAA+K,QAAAzK,WAAA+H,EAAArI,OAAAM,WAAA0K,SAAA3C,EAAArI,OAAAgL,SAAAzK,SAAA8H,EAAArI,OAAAO,SAAA0K,cAAA5C,EAAArI,OAAAiL,cAAAC,eAAA7C,EAAArI,OAAAkL,eAAAxK,SAAA2H,EAAArI,OAAAU,SAAAT,MAAAoI,EAAArI,OAAAC,OAA4aoJ,IAAK3E,SAAA2D,EAAA3D,aAAyB,KAAA2D,EAAAQ,GAAA,KAAAL,EAAA,UAAiCG,OAAOkC,KAAA,MAAWrC,EAAA,OAAYE,YAAA,iBAA2BF,EAAA,OAAYE,YAAA,gBAA0BF,EAAA,OAAYE,YAAA,UAAAyC,MAAA9C,EAAAvI,SAAA,MAA+CuI,EAAA,YAAAG,EAAA,OAA8BG,OAAOe,IAAArB,EAAAnH,YAAA8H,MAAA,UAAsCX,EAAA+C,SAAA/C,EAAAQ,GAAA,KAAAL,EAAA,SAAuCO,aAAasC,SAAA,WAAAC,KAAA,gBAAAtC,MAAA,OAA2DL,OAAQnF,KAAA,OAAA+H,GAAA,UAAAC,OAAA,+CAAoFC,UAAWnG,MAAA+C,EAAAvH,SAAoBuI,IAAKqC,OAAA,SAAAnC,GAA0B,OAAAlB,EAAAxD,UAAA0E,EAAA,OAAkClB,EAAAQ,GAAA,KAAAL,EAAA,SAA0BE,YAAA,MAAAC,OAAyBgD,IAAA,aAAiBtD,EAAAQ,GAAA,kBAAAR,EAAAQ,GAAA,KAAAL,EAAA,QAAkDE,YAAA,gBAAAC,OAAmCC,KAAA,UAAgBA,KAAA,WAAeJ,EAAA,aAAkBa,IAAIC,MAAA,SAAAC,GAAyBlB,EAAApH,eAAA,MAA4BoH,EAAAQ,GAAA,SAAAR,EAAAQ,GAAA,KAAAL,EAAA,aAA8CG,OAAOnF,KAAA,UAAAzD,QAAAsI,EAAAtI,SAAuCsJ,IAAKC,MAAAjB,EAAAlC,gBAA0BkC,EAAAQ,GAAA,sBAEz6E+C,oBCFjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEpM,EACAwI,GATF,EAVA,SAAA6D,GACEF,EAAQ,SAaV,KAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/4.a003ed514521161acb6d.js","sourcesContent":["<template>\r\n  <div>\r\n    <el-card class=\"box-card\">\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span>个人信息</span>\r\n      </div>\r\n      <el-form style=\"width:40%\" :model=\"roleValidateForm\" ref=\"roleValidateForm\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n          <el-form-item   label=\"头像\"   prop=\"avatar\">\r\n            <div @click=\"dialogVisible = true,option.img = roleValidateForm.avatar\">\r\n              <el-avatar :size=\"60\"  icon=\"el-icon-user-solid\" :src=\"roleValidateForm.avatar\"> </el-avatar>\r\n            </div>\r\n          </el-form-item>\r\n          <el-form-item   label=\"角色\"  prop=\"role_id\"  :rules=\"[ { required: true, message: '角色名不能为空'}]\">\r\n            <el-select multiple v-model=\"roleValidateForm.role_id\" placeholder=\"请选择角色\" style=\"width:100%\">\r\n              <el-option  v-for=\"item in roleList\"  :key=\"item.role_id\"  :label=\"item.role_name\" :value=\"item.role_id\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item   label=\"用户名\"  prop=\"nick_name\"  :rules=\"[\r\n              { required: true, message: '用户名不能为空'}]\">\r\n            <el-input type=\"input\" v-model=\"roleValidateForm.nick_name\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n         <el-form-item   label=\"电话\"  prop=\"phone\"  :rules=\"[\r\n              { required: true, message: '电话名不能为空'}]\">\r\n            <el-input type=\"input\" v-model=\"roleValidateForm.phone\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item   label=\"密码\"  prop=\"password\"  :rules=\"[\r\n              { required: true, message: '密码名不能为空'}]\">\r\n            <el-input type=\"input\" v-model=\"roleValidateForm.password\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item   label=\"email\"  prop=\"email\">\r\n            <el-input type=\"input\" v-model=\"roleValidateForm.email\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <el-button style=\"margin-left:100px\" type=\"primary\" @click=\"submitForm('roleValidateForm')\" size=\"small\" :loading=\"loading\">保存</el-button>\r\n    </el-card>\r\n    <el-dialog\r\n        title=\"头像设置\"\r\n        :visible.sync=\"dialogVisible\"\r\n        width=\"30%\"\r\n        >\r\n        <!--   @imgLoad=\"imgLoad\"   @realTime=\"realTime\"-->\r\n        <el-row :gutter=\"24\">\r\n            <el-col :span=\"13\">\r\n              <div class=\"cropper\">\r\n                  <vueCropper\r\n                    ref=\"cropper\"\r\n                    :img=\"option.img\"\r\n                    :outputSize=\"option.size\"\r\n                    :outputType=\"option.outputType\"\r\n                    :info=\"option.info\"\r\n                    :full=\"option.full\"\r\n                    :canScale=\"option.canScale\"\r\n                    :canMove=\"option.canMove\"\r\n                    :canMoveBox=\"option.canMoveBox\"\r\n                    :original=\"option.original\"\r\n                    :autoCrop=\"option.autoCrop\"\r\n                    :autoCropWidth=\"option.autoCropWidth\"\r\n                    :autoCropHeight=\"option.autoCropHeight\"\r\n                    :fixedBox=\"option.fixedBox\"\r\n                    :fixed=\"option.fixed\"\r\n                    @realTime=\"realTime\"\r\n                ></vueCropper>\r\n                <!--  :fixedNumber=\"option.fixedNumber\" -->\r\n              </div>\r\n            </el-col>\r\n            <el-col :span=\"11\">\r\n              <div class=\"croper-right\">\r\n                <div class=\"preview-box\" >\r\n                  <div :style=\"previews.div\" class=\"preview\">\r\n                     <img v-if=\"corpperImag\" :src=\"corpperImag\" width=\"100%\">\r\n                  </div>\r\n                </div>\r\n                <input type=\"file\" id=\"uploads\" :value=\"imgFile\"\r\n                  style=\"position:absolute; clip:rect(0 0 0 0);width: 1px;\"\r\n                  accept=\"image/png, image/jpeg, image/gif, image/jpg\"\r\n                  @change=\"uploadImg($event, 1)\">\r\n                 <label class=\"btn\" for=\"uploads\">选择图片</label>\r\n              </div>\r\n            </el-col>\r\n        </el-row>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"submitUpload\" :loading=\"loading\">确 定</el-button>\r\n        </span>\r\n  </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { api } from '@/request/api.js'\r\nimport { mapGetters } from 'vuex'\r\nexport default {\r\n  data () {\r\n    return {\r\n      crap: false,\r\n      previews: {},\r\n      loading: false,\r\n      option: {\r\n        fixed: true, // 是否开启截图框宽高固定比例\r\n        img: '', // 裁剪图片的地址\r\n        info: true, // 裁剪框的大小信息\r\n        outputSize: 1, // 剪切后的图片质量（0.1-1）\r\n        // full: true, // 输出原图比例截图 props名full\r\n        outputType: 'png', // 裁剪生成额图片的格式\r\n        // canMove: true, // 能否拖动图片\r\n        // original: false, // 上传图片是否显示原始宽高\r\n        canMoveBox: true, // 能否拖动截图框\r\n        autoCrop: true, // 是否默认生成截图框\r\n        // autoCropWidth: 200, // 默认生成截图框宽度\r\n        // autoCropHeight: 200, // 默认生成截图框高度\r\n        canScale: true, // 图片是否允许滚轮缩放\r\n        centerBox: true, // 截图框是否被限制在图片里面\r\n        fixedBox: false, // 截图框固定大小\r\n        fixedNumber: [4, 4] // 截图框的宽高比例\r\n      },\r\n      fileName: '', // 本机文件地址\r\n      downImg: '#',\r\n      imgFile: '',\r\n      uploadImgRelaPath: '', // 上传后的图片的地址（不带服务器域名）\r\n\r\n      roleList: [],\r\n      dialogVisible: false,\r\n      corpperImag: '',\r\n      roleValidateForm: {\r\n        nick_name: '',\r\n        password: '',\r\n        email: '',\r\n        phone: '',\r\n        avatar: '',\r\n        role_id: []\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters('user', ['userInfo'])\r\n  },\r\n  created () {\r\n    this.getroleList()\r\n    this.roleValidateForm = this.userInfo\r\n  },\r\n  methods: {\r\n    async updateuUser () {\r\n      this.loading = true\r\n      let { code, msg } = await this.Req.put(api.updateUser, this.roleValidateForm)\r\n      if (code === 200) {\r\n        this.$message({\r\n          message: msg,\r\n          type: 'success'\r\n        })\r\n        this.dialogVisiblerole = false\r\n      } else {\r\n        this.dialogVisiblerole = false\r\n        this.resetForm('roleValidateForm')\r\n      }\r\n      this.loading = false\r\n    },\r\n    // 编辑\r\n    submitForm (formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          this.updateuUser()\r\n        } else {\r\n          console.log('error submit!!')\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    async getroleList () {\r\n      let { data, code } = await this.Req.get(api.getAllRole)\r\n      if (code === 200) {\r\n        this.roleList = data.roleList\r\n      }\r\n    },\r\n    // 实时预览函数\r\n    realTime (data) {\r\n      this.previews = data\r\n      let self = this\r\n      this.$refs['cropper'].getCropData((data) => {\r\n        self.corpperImag = data\r\n      })\r\n    },\r\n    // 选择本地图片\r\n    uploadImg (e, num) {\r\n      var _this = this\r\n      // 上传图片\r\n      var file = e.target.files[0]\r\n      _this.fileName = file.name\r\n      if (!/\\.(gif|jpg|jpeg|png|bmp|GIF|JPG|PNG)$/.test(e.target.value)) {\r\n        alert('图片类型必须是.gif,jpeg,jpg,png,bmp中的一种')\r\n        return false\r\n      }\r\n      var reader = new FileReader()\r\n      reader.onload = (e) => {\r\n        let data\r\n        if (typeof e.target.result === 'object') {\r\n          // 把Array Buffer转化为blob 如果是base64不需要\r\n          data = window.URL.createObjectURL(new Blob([e.target.result]))\r\n        } else {\r\n          data = e.target.result\r\n        }\r\n        if (num === 1) {\r\n          _this.option.img = data\r\n        } else if (num === 2) {\r\n          _this.example2.img = data\r\n        }\r\n      }\r\n      // 转化为base64\r\n      // reader.readAsDataURL(file)\r\n      // 转化为blob\r\n      reader.readAsArrayBuffer(file)\r\n    },\r\n    async submitUpload () {\r\n      let fd = new FormData()\r\n      let baseToblob = this.base64URLtoFile(this.corpperImag)\r\n      fd.append('images', baseToblob, `csde_${Date.parse(new Date())}.jpeg`)\r\n      this.loading = true\r\n      let { data, code } = await this.Req.upload(api.uploadImage, fd, { headers: { 'Content-Type': 'multipart/form-data' } })\r\n      if (code === 200) {\r\n        this.roleValidateForm.avatar = data.path\r\n      }\r\n      this.dialogVisible = false\r\n      this.loading = false\r\n    },\r\n    // base64转为Blob\r\n    base64UrlToBlob (base64Data) {\r\n      let arr = base64Data.split(',')\r\n      let mime = arr[0].match(/:(.*?);/)[1]\r\n      let bstr = atob(arr[1])\r\n      let n = bstr.length\r\n      let u8arr = new Uint8Array(n)\r\n      while (n--) {\r\n        u8arr[n] = bstr.charCodeAt(n)\r\n      }\r\n      return new Blob([u8arr], { type: mime })\r\n    },\r\n    // base64转换为file\r\n    base64URLtoFile (base64Data, filename) { // 将base64转换为文件\r\n      let arr = base64Data.split(',')\r\n      let mime = arr[0].match(/:(.*?);/)[1]\r\n      let bstr = atob(arr[1])\r\n      let n = bstr.length\r\n      let u8arr = new Uint8Array(n)\r\n      while (n--) {\r\n        u8arr[n] = bstr.charCodeAt(n)\r\n      }\r\n      return new File([u8arr], filename, { type: mime })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.cropper {\r\n  width: 250px;\r\n  height: 250px;\r\n}\r\n.btn{\r\n  margin: 10px 0;\r\n  padding: 6px 20px;\r\n  width: 160px;\r\n  text-align: center;\r\n  border-radius: 4px;\r\n  margin-left: 10px;\r\n  background-color: #409EFF;\r\n  color: #fff;\r\n  cursor: pointer;\r\n  display: inline-block;\r\n}\r\n.btn:hover{\r\n  background-color: #387EF6;\r\n}\r\n.preview {\r\n  min-width: 200px;\r\n  min-height: 200px;\r\n  overflow: hidden;\r\n  border-radius: 50%;\r\n  border:4px solid #cccccc;\r\n  background: #cccccc;\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/tabpage/user/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"个人信息\")])]),_vm._v(\" \"),_c('el-form',{ref:\"roleValidateForm\",staticClass:\"demo-ruleForm\",staticStyle:{\"width\":\"40%\"},attrs:{\"model\":_vm.roleValidateForm,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"头像\",\"prop\":\"avatar\"}},[_c('div',{on:{\"click\":function($event){_vm.dialogVisible = true,_vm.option.img = _vm.roleValidateForm.avatar}}},[_c('el-avatar',{attrs:{\"size\":60,\"icon\":\"el-icon-user-solid\",\"src\":_vm.roleValidateForm.avatar}})],1)]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"角色\",\"prop\":\"role_id\",\"rules\":[ { required: true, message: '角色名不能为空'}]}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"multiple\":\"\",\"placeholder\":\"请选择角色\"},model:{value:(_vm.roleValidateForm.role_id),callback:function ($$v) {_vm.$set(_vm.roleValidateForm, \"role_id\", $$v)},expression:\"roleValidateForm.role_id\"}},_vm._l((_vm.roleList),function(item){return _c('el-option',{key:item.role_id,attrs:{\"label\":item.role_name,\"value\":item.role_id}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"nick_name\",\"rules\":[\n            { required: true, message: '用户名不能为空'}]}},[_c('el-input',{attrs:{\"type\":\"input\",\"autocomplete\":\"off\"},model:{value:(_vm.roleValidateForm.nick_name),callback:function ($$v) {_vm.$set(_vm.roleValidateForm, \"nick_name\", $$v)},expression:\"roleValidateForm.nick_name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"电话\",\"prop\":\"phone\",\"rules\":[\n            { required: true, message: '电话名不能为空'}]}},[_c('el-input',{attrs:{\"type\":\"input\",\"autocomplete\":\"off\"},model:{value:(_vm.roleValidateForm.phone),callback:function ($$v) {_vm.$set(_vm.roleValidateForm, \"phone\", $$v)},expression:\"roleValidateForm.phone\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\",\"rules\":[\n            { required: true, message: '密码名不能为空'}]}},[_c('el-input',{attrs:{\"type\":\"input\",\"autocomplete\":\"off\"},model:{value:(_vm.roleValidateForm.password),callback:function ($$v) {_vm.$set(_vm.roleValidateForm, \"password\", $$v)},expression:\"roleValidateForm.password\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"email\",\"prop\":\"email\"}},[_c('el-input',{attrs:{\"type\":\"input\",\"autocomplete\":\"off\"},model:{value:(_vm.roleValidateForm.email),callback:function ($$v) {_vm.$set(_vm.roleValidateForm, \"email\", $$v)},expression:\"roleValidateForm.email\"}})],1)],1),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"100px\"},attrs:{\"type\":\"primary\",\"size\":\"small\",\"loading\":_vm.loading},on:{\"click\":function($event){return _vm.submitForm('roleValidateForm')}}},[_vm._v(\"保存\")])],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"头像设置\",\"visible\":_vm.dialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-row',{attrs:{\"gutter\":24}},[_c('el-col',{attrs:{\"span\":13}},[_c('div',{staticClass:\"cropper\"},[_c('vueCropper',{ref:\"cropper\",attrs:{\"img\":_vm.option.img,\"outputSize\":_vm.option.size,\"outputType\":_vm.option.outputType,\"info\":_vm.option.info,\"full\":_vm.option.full,\"canScale\":_vm.option.canScale,\"canMove\":_vm.option.canMove,\"canMoveBox\":_vm.option.canMoveBox,\"original\":_vm.option.original,\"autoCrop\":_vm.option.autoCrop,\"autoCropWidth\":_vm.option.autoCropWidth,\"autoCropHeight\":_vm.option.autoCropHeight,\"fixedBox\":_vm.option.fixedBox,\"fixed\":_vm.option.fixed},on:{\"realTime\":_vm.realTime}})],1)]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":11}},[_c('div',{staticClass:\"croper-right\"},[_c('div',{staticClass:\"preview-box\"},[_c('div',{staticClass:\"preview\",style:(_vm.previews.div)},[(_vm.corpperImag)?_c('img',{attrs:{\"src\":_vm.corpperImag,\"width\":\"100%\"}}):_vm._e()])]),_vm._v(\" \"),_c('input',{staticStyle:{\"position\":\"absolute\",\"clip\":\"rect(0 0 0 0)\",\"width\":\"1px\"},attrs:{\"type\":\"file\",\"id\":\"uploads\",\"accept\":\"image/png, image/jpeg, image/gif, image/jpg\"},domProps:{\"value\":_vm.imgFile},on:{\"change\":function($event){return _vm.uploadImg($event, 1)}}}),_vm._v(\" \"),_c('label',{staticClass:\"btn\",attrs:{\"for\":\"uploads\"}},[_vm._v(\"选择图片\")])])])],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.submitUpload}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6a520387\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/tabpage/user/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6a520387\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6a520387\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/tabpage/user/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}